<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RECOPIX</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<div class="min-h-screen p-4 lg:p-8 flex flex-col items-center">
    <h1 class="text-3xl font-bold mb-6 text-gray-800">RECOPIX</h1>
    <h2 class="text-3xl font-bold mb-6 text-gray-800">Recolour & Pixelator</h2>
    <p class="mb-6 text-gray-600 text-center max-w-2xl">
        The target resolution is set to <span class="font-bold text-indigo-600">48x48</span> pixels. Edit the downscaled image directly to enforce specific features before generating the final mosaic.
    </p>

    <div id="app" class="w-full max-w-[95%] grid grid-cols-1 lg:grid-cols-6 gap-8">
        
        <!-- Controls Panel -->
        <div class="lg:col-span-1 card h-fit space-y-4">
            <h2 class="text-xl font-semibold mb-3 border-b pb-2 text-indigo-600">1. Source & Editor</h2>
            
            <div class="w-full flex flex-col items-center justify-center p-2 border-2 border-dashed border-indigo-100 rounded-lg bg-indigo-50/30">
                <label for="fileInput" 
                       class="cursor-pointer py-2 px-6 rounded-full text-sm font-semibold bg-indigo-50 text-indigo-700 hover:bg-indigo-100 hover:text-indigo-800 transition-colors shadow-sm border border-indigo-200">
                    Choose File
                </label>
                <!-- The actual input is hidden but still functional -->
                <input type="file" id="fileInput" accept="image/*" class="hidden" />
                
                <!-- The text display is now separate and below the button -->
                <p id="fileNameDisplay" class="text-xs text-gray-500 mt-2 font-medium">No file chosen</p>
            </div>
            
            <p class="text-sm font-medium pt-2">Downscaled Resolution: <span id="res-display" class="font-bold text-gray-700">48x48</span></p>

            <h3 class="font-semibold pt-4 border-t mt-4 text-orange-600">Manual Edit Color</h3>
            <div class="flex items-center space-x-2">
                <input type="color" id="editorColorPicker" value="#0000FF" class="w-10 h-10 rounded-full border-2 border-gray-300 cursor-pointer">
                <span id="currentColorDisplay" class="font-mono text-sm text-gray-700"></span>
            </div>

            <button id="generateButton" 
                    class="w-full py-3 mt-4 text-white font-bold bg-green-600 rounded-lg 
                           hover:bg-green-700 transition duration-150 disabled:opacity-50"
                    disabled>
                Run Mosaic Generation
            </button>
        </div>

        <!-- Canvas Area -->
        <div class="lg:col-span-2 card flex flex-col items-center">
            <h2 class="text-xl font-semibold mb-4 text-gray-800">2: Interactive Canvas</h2>
            <canvas id="editorCanvas" width="48" height="48" class="w-full max-w-xl h-auto aspect-square"></canvas>
        </div>
        
        <!-- Output and Summary -->
        <div class="lg:col-span-3 card">
            <h2 class="text-xl font-semibold mb-4 text-gray-800 border-b pb-2">3. Final Mosaic & Summary</h2>
            <div id="outputContainer" class="flex flex-col md:flex-row gap-6">
                <!-- Mosaic Output -->
                <div class="md:w-1/2 flex flex-col items-center">
                    <!-- Wrapper for Canvas + Labels -->
                    <div class="relative w-full max-w-md aspect-square">
                        <!-- Row Labels (Y-Axis) -->
                        <div class="absolute inset-y-0 right-full mr-1 text-xs text-gray-600 font-mono hidden sm:block">
                            <!-- 48 rows total. Percentage = (Row Number) / 48 * 100% -->
                            <span class="absolute right-0 -translate-y-1/2" style="top: 1%;">1</span>
                            <span class="absolute right-0 -translate-y-1/2" style="top: 20.833%;">10</span>
                            <span class="absolute right-0 -translate-y-1/2" style="top: 41.667%;">20</span>
                            <span class="absolute right-0 -translate-y-1/2" style="top: 62.5%;">30</span>
                            <span class="absolute right-0 -translate-y-1/2" style="top: 83.333%;">40</span>
                        </div>

                        <!-- Canvas size is exactly 48x48 -->
                        <canvas id="mosaicCanvas" width="48" height="48" class="w-full h-full border-2 border-gray-400"></canvas>
                    </div>

                    <p class="mt-2 text-sm text-gray-500">
                        (Hover to see colour name)
                        <div>
                            <span id="hoverInfo" class="font-bold text-red-600"></span>

                        </div>
                    </p>
                </div>
                <!-- Summary Output -->
                <div class="md:w-1/2">
                    <h3 class="font-semibold text-lg mb-2 text-indigo-700">Pixel Usage Summary:</h3>
                    <div id="summaryOutput" class="text-sm font-mono bg-gray-50 p-3 rounded-lg max-h-96 overflow-y-auto">
                        Awaiting generation...
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
    <script src="script.js"></script>
</body>
</html>